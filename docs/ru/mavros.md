# MAVROS

–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [http://wiki.ros.org/mavros](http://wiki.ros.org/mavros)

MAVROS \(MAVLink + ROS\) ‚Äî —ç—Ç–æ –ø–∞–∫–µ—Ç –¥–ª—è ROS, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∞–º–∏ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É [MAVLink](mavlink.md). MAVROS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–µ—Ç–Ω—ã–µ —Å—Ç–µ–∫–∏ PX4 –∏ APM. –°–≤—è–∑—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø–æ UART, USB, TCP –∏–ª–∏ UDP.

MAVROS –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ ROS-—Ç–æ–ø–∏–∫–∏ –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥, –ø—É–±–ª–∏–∫—É–µ—Ç –≤ –¥—Ä—É–≥–∏–µ —Ç–æ–ø–∏–∫–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å—ã.

–ù–æ–¥–∞ MAVROS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ launch-—Ñ–∞–π–ª–µ. –î–ª—è [–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](connection.md) —Å–º. –∞—Ä–≥—É–º–µ–Ω—Ç `fcu_conn`.

> **Hint** –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–ø—Ç–µ—Ä–æ–º –≤–æ–∑–º–æ–∂–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–∫–µ—Ç–∞ [`simple_offboard`](simple_offboard.md).

<!-- -->

> **Note** –í –ø–∞–∫–µ—Ç–µ `clover` –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–≥–∏–Ω—ã MAVROS –æ—Ç–∫–ª—é—á–µ–Ω—ã (–≤ —Ü–µ–ª—è—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤). –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –ø–∞—Ä–∞–º–µ—Ç—Ä `plugin_blacklist` –≤ —Ñ–∞–π–ª–µ `/home/pi/catkin_ws/src/clover/clover/launch/mavros.launch`. $\color{red}{\textsf{üî¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è}}$

## –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

`/mavros/set_mode` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [–ø–æ–ª–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º](modes.md) –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –û–±—ã—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ä–µ–∂–∏–º OFFBOARD \(–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å Raspberry Pi\).

`/mavros/cmd/arming` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –º–æ—Ç–æ—Ä—ã –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∞ \(–∏–∑–º–µ–Ω–∏—Ç—å armed-—Å—Ç–∞—Ç—É—Å\).

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—É–±–ª–∏–∫—É–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏

`/mavros/state` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø–æ–ª–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É. –†–µ–∂–∏–º –ø–æ–ª–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

`/mavros/local_position/pose` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–æ–ø—Ç–µ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ENU –∏ –µ–≥–æ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è.

`/mavros/local_position/velocity` ‚Äî —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö. –£–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏.

`/mavros/global_position/global` ‚Äî —Ç–µ–∫—É—â–∞—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è \(—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞, –≤—ã—Å–æ—Ç–∞\).

`/mavros/global_position/local` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç [UTM](https://ru.wikipedia.org/wiki/–°–∏—Å—Ç–µ–º–∞_–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç_UTM).

`/mavros/global_position/rel_alt` ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ \(–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ—Ç—ã –≤–∫–ª—é—á–µ–Ω–∏—è –º–æ—Ç–æ—Ä–æ–≤\).

–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π, –ø—É–±–ª–∏–∫—É–µ–º—ã—Ö –≤ —Ç–æ–ø–∏–∫–∏ –≤–æ–∑–º–æ–∂–µ–Ω —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã `rostopic`, –Ω–∞–ø—Ä–∏–º–µ—Ä `rostopic echo /mavros/state`. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [—Ä–∞–±–æ—Ç–∞ —Å ROS](ros.md).

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

`/mavros/setpoint_position/local` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é  –∏ —Ä—ã—Å–∫–∞–Ω—å–µ \(yaw\) –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∞ \(–≤ —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ENU\).

`/mavros/setpoint_position/global` ‚Äì —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö (—à–∏—Ä–∏–Ω–∞, –¥–æ–ª–≥–æ—Ç–∞ –∏ –≤—ã—Å–æ—Ç–∞) –∏ —Ä—ã—Å–∫–∞–Ω—å–µ –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∞.

`/mavros/setpoint_velocity/cmd_vel` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ª–∏–Ω–µ–π–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∞.

`/mavros/setpoint_attitude/attitude` –∏ `/mavros/setpoint_attitude/att_throttle` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é \(Attitude\) –∏ —É—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞.

`/mavros/setpoint_attitude/cmd_vel` –∏ `/mavros/setpoint_attitude/att_throttle` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—ã–µ —É–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —É—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞.

### –¢–æ–ø–∏–∫–∏ –¥–ª—è –ø–æ—Å—ã–ª–∫–∏ raw-–ø–∞–∫–µ—Ç–æ–≤

`/mavros/setpoint_raw/local` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ [SET\_POSITION\_TARGET\_LOCAL\_NED](https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_LOCAL_NED). –ü–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é /—Ü–µ–ª–µ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Ü–µ–ª–µ–≤–æ–µ —Ä—ã—Å–∫–∞–Ω—å–µ/—É–≥–ª–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ —Ä—ã—Å–∫–∞–Ω—å—é. –í—ã–±–æ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã—Ö –≤–µ–ª–∏—á–∏–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø–æ–ª—è `type_mask`.

`/mavros/setpoint_raw/attitude` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ [SET\_ATTITUDE\_TARGET](https://mavlink.io/en/messages/common.html#SET_ATTITUDE_TARGET). –ü–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é / —É–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —É—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞. –í—ã–±–æ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã—Ö –≤–µ–ª–∏—á–∏–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø–æ–ª—è `type_mask`

`/mavros/setpoint_raw/global` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ [SET\_POSITION\_TARGET\_GLOBAL\_INT](https://mavlink.io/en/messages/common.html#SET_POSITION_TARGET_GLOBAL_INT). –ü–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö \(—à–∏—Ä–∏–Ω–∞, –¥–æ–ª–≥–æ—Ç–∞, –≤—ã—Å–æ—Ç–∞\), –∞ —Ç–∞–∫–∂–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ–ª–µ—Ç–∞.
